<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" href="style.css">

<script language="javascript" src="setup.js">
</script>
<script language="javascript">
    let wprot = "";
    let whost = "%wallet_host%";
    let wifista = "%wifista%";
    var wurl = "";
</script>
<meta charset="utf-8">
</head>
<body>
<div class="form">
<input type hidden id="keys" type="">
<div class="select">
</div>
<div class="head l">
<div class="sel">
    <div class="me l" id="setup" ><a class="il" href="/setup">setup</a></div>
    <div class="me m" id="burn"><a class="il" href="/">burn</a></div>
    <div class="me r" id="wipe"><a class="il" href="/wipe">wipe</a></div>
</div>
<b>Bolty - Setup</b><br />
<div class="name"><a class="dev" href="?d=p"><</a>%cnn%. %cn%<a class="dev" href="?d=n">></a></div> 
</div>
<div class="info" id="info">
<div class="k" id="u">
URL: %url%
</div>
<div class="k" id="ks0">
Key 0: %ks0%
</div>
<div class="k" id="ks1">
Key 1: %ks1%
</div>
<div class="k" id="ks2">
Key 2: %ks2%
</div>
<div class="k" id="ks3">
Key 3: %ks3%
</div>
<div class="k" id="ks4">
Key 4: %ks4%
</div>
</div>
<div class="button act onl sta">
<a data-target="sm3" data-toggle="modal">new wallet</a>
</div>
<div class="button act onl">
<a data-target="sm4" data-toggle="modal">import Bolt Card</a>
</div>
<div class="button act">
<a data-target="sm1" data-toggle="modal">edit Bolt Card</a>
</div>
<div class="button act now">
<a data-target="sm5" data-toggle="modal">wallet</a>
</div>
<div class="button act">
<a data-target="sm7" data-toggle="modal">backup</a>
</div>
<div class="button act">
<a data-target="sm2" data-toggle="modal">wifi-setup</a>
</div>
<div class="button act">
<a data-target="sm8" data-toggle="modal">Password</a>
</div>

</div>
<div id="sm1" class="modal">
  <div class="modal-window">
      <h3>Edit Bolt Card</h3>
      <form data-t="/keys">
      <div class="cf">
      <input type="text" id="card_name" maxlength="49" value="%cn%" required /><label for="card_name" class="pl">Bolt Card Name</label><br>
      </div>
      <div class="cf">
      <input type="text" id="wallet_host" required  value="%wallet_host%"/><label for="wallet_host" class="pl">Wallet Host (optional)</label><br>
      </div>
      <div class="cf">
      <input type="text" id="wallet_url" required  value="%wallet_url%"/><label for="wallet_url" class="pl">Wallet Url (optional)</label><br>
      </div>
      <div class="cf">
      <input type="text" id="lnurlw_base" maxlength="255" value="%url%" required /><label for="lnurlw_base" class="pl">LNRUrl</label><br>
      </div>
      <div class="cf">
      <input type="text" id="k0" maxlength="32" required value="%k0%" /><label for="k0" class="pl">Key 0</label><br>
      </div>
      <div class="cf">
      <input type="text" id="k1" maxlength="32" required value="%k1%" /><label for="k1" class="pl">Key 1</label><br>
      </div>
      <div class="cf">
      <input type="text" id="k2" maxlength="32" required value="%k2%" /><label for="k2" class="pl">Key 2</label><br>
      </div>
      <div class="cf">
      <input type="text" id="k3" maxlength="32" required value="%k3%" /><label for="k3" class="pl">Key 3</label><br>
      </div>
      <div class="cf">
      <input type="text" id="k4" maxlength="32" required value="%k4%" /><label for="k4" class="pl">Key 4</label><br>
      </div>
      <div class="cf">
      <input type="button" id="kesave" value="save" required /><br>
      </div>
      </form>
  </div>
</div>
<div id="sm2" class="modal">
  <div class="modal-window" id="sm2mod">
      <h3>Wifi Setup</h3>
      <form data-t="/wifi" data-r="rhndwifi">
      <div class="cf">
      <input type="radio" name="wifimode" id="mode-ap" value="ap"/><label for="mode-ap" class="ra">access point (random credentials)</label><br>
      <input type="radio" name="wifimode" id="mode-sta" value="sta"/><label for="mode-sta" class="plra">join network</label><br>
      </div>
      <div class="cf">
      <input type="text" id="essid" value="%essid%" required /><label for="essid" class="pl">wifi essid</label><br>
      </div>
      <div class="cf">
      <input type="password" id="password" value="*123--keep-my-current-password--321*" required /><label for="password" class="pl">wifi password</label><br>
      </div>
      <div class="cf">
      <input type="button" id="wisave" value="save" required /><br>
      </div>
      </form>
  </div>
</div>
<div class="modal" id="sm5">
  <div class="modal-window">
    <h3>Open your wallet</h3>
    <form>
    <span>Click the link or scan the qrcode</span>
    <div class="cf">
    <a href="%wallet_link%">Open Wallet</a>
    </div>
    <div class="cf">
    <iframe src="/qr"  seamless="seamless" width=400"  height="400" loading="lazy"></iframe>
    </div>
    <div class="cf">
    </div>
    </form>
  </div>
</div>
<div class="modal" id="sm3">
  <div class="modal-window">
    <h3>Create LNbits wallet and Bolt Card</h3>
    <form>
    <span>Enter a LNbits Server, a name for your new wallet and Bolt Card. Tap the reader with your Bolt Card to scan the UID. Then click on "create".</span>
    <div class="cf">
    <input type="text" id="host_new" maxlength="49" value="%wallet_host%" required /><label for="host_new" class="pl">LNbits host (default: https://legend.lnbits.com)</label>
    </div>
    <div class="cf">
    <input type="text" id="card_new" maxlength="49" value="%cn%" required /><label for="card_new" class="pl">Name</label>
    </div>
    <div class="cf">
    <input type="text" id="daily_limit" maxlength="10" value="10000" required /><label for="daily_limit" class="pl">Limit - sats per day</label>
    </div>
    <div class="cf">
    <input type="text" id="tx_limit" maxlength="10" value="1000" required /><label for="tx_limit" class="pl">Limit - sats per transaction</label>
    </div>
    <div class="cf">
    <input type="text" id="uid" maxlength="14" value="" required /><label for="uid" class="pl">UID (Enter or present card to bolty)</label>
    </div>
    <div class="cf">
    <input type="button" data-loc="true" id="crwal" value="create"/><br>
    </div>
    </form>
  </div>
</div>
<div class="modal" id="sm4">
  <div class="modal-window">
    <h3>Import Bolt Card from LNbits</h3>
    <form data-j="ki" data-t="/keys">
    <span>
    You can import a Bolt Card from any LNbits-server. In the LNbits backend navigate to the Boltcards extension.
    In the list of configured Bolt Cards, click on the QR-code icon of the Card you want to import and click "copy link".
    Paste the link in a browserwindow. You should now see the json-code (In firefox switch to the "raw"-view). Copy it and paste it below.</span>
    <br> <br> 
    Click the "next" button.
    <div class="cf">
    <textarea id="ki" name="k" required></textarea><label for="ki" class="pl">Paste LNbits JSON here...</label>
    </div>
    <div class="cf">
    <input type="button" id="next" value="next" class="off"/><br>
    </div>
    </form>
 </div>
</div>
<div class="modal" id="sm7">
  <div class="modal-window">
    <h3>Backup config</h3>
    <form>
    <span>
    Click "Export" to download a backup of the configuraton.
    </span>
    <div class="cf">
    <input type="button" id="export" value="Export" class="act" onclick="window.location='/export';"/><br>
    </div>
    </form>
    <h3>Restore config</h3>
   <form method="POST" action="/upload" enctype="multipart/form-data">
    <span>
    Select a configuration-backup  file and click "Import" to restore a backup.<br/><br/>
    </span>
   <input type="file" name="data"/><br/><br/>  
   <input type="submit" id="Import" value="Import" class="act"/><br>
   </form>
    <span>
    </span>
    <div class="cf">
    </div>
    </form>
 </div>
</div>
<div class="modal" id="sm6">
  <div class="modal-window">
    <h3 id="proti"></h3>
    <form data-t="/keys">
    <span id="promsg">
    </span>
    <br/><br/>Click "Ok" to continue.
    <div class="cf">
    <input type="button" id="prook" value="Ok" class="act"/><br>
    </div>
    </form>
 </div>
</div>
<div id="sm8" class="modal">
  <div class="modal-window">
      <h3>Setup-Password</h3>
      here you can reset the setup password.
      <form data-t="/ac">
      <div class="cf">
      <input type="text" id="http_u" required /><label for="http_u" class="pl">Username</label><br>
      </div>
      <div class="cf">
      <input type="password" id="http_p" required /><label for="http_p" class="pl">Password</label><br>
      </div>
      <div class="cf">
      <input type="button" id="wisave" value="save" required /><br>
      </div>
      </form>
  </div>
</div>
</body>
</html>
